{% extends 'base.html' %}
{% load static %}

{% block title %}Той со звездой - Главная{% endblock %}

{% block content %}
<header class="header">
    <div class="container">
        <a href="{% url 'main:index' %}" class="logo">Той со звездой</a>
        <nav class="nav desktop-nav">
            <a href="{% url 'main:index' %}" class="nav-link">
                <i class="ri-home-line"></i>
                <span>Главная</span>
            </a>
            <a href="{% url 'main:catalog' %}" class="nav-link">
                <i class="ri-group-line"></i>
                <span>Исполнители</span>
            </a>
            {% if user.is_authenticated %}
                {% if user.user_type == 'customer' %}
                    <a href="{% url 'main:create_order' %}" class="nav-link">
                        <i class="ri-add-circle-line"></i>
                        <span>Создать заявку</span>
                    </a>
                {% endif %}
                <a href="{% url 'main:dashboard' %}" class="nav-link">
                    <i class="ri-dashboard-line"></i>
                    <span>Личный кабинет</span>
                </a>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-toggle">
                        <div class="user-info">
                            {% if user.profile_photo %}
                                <img src="{{ user.profile_photo.url }}" alt="{{ user.get_full_name }}" class="nav-avatar">
                            {% else %}
                                <i class="ri-user-line"></i>
                            {% endif %}
                            <span>{{ user.get_full_name|default:user.phone_number }}</span>
                        </div>
                        <i class="ri-arrow-down-s-line"></i>
                    </button>
                    <div class="nav-dropdown-menu">
                        <a href="{% url 'main:profile_settings' %}">
                            <i class="ri-settings-line"></i>
                            <span>Настройки</span>
                        </a>
                        <a href="{% url 'main:logout' %}">
                            <i class="ri-logout-box-line"></i>
                            <span>Выйти</span>
                        </a>
                    </div>
                </div>
            {% else %}
                <a href="{% url 'main:auth' %}" class="nav-link auth-link">
                    <i class="ri-login-box-line"></i>
                    <span>Войти по номеру телефона</span>
                </a>
            {% endif %}
        </nav>
        <button class="mobile-menu-toggle" aria-label="Открыть меню">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</header>

<div class="hero">
    <div class="container">
        <h1>Найдите лучших исполнителей для вашего мероприятия</h1>
        <p>Фотографы, видеографы, музыканты и другие профессионалы для вашего праздника</p>
        {% if not user.is_authenticated %}
            <div class="hero-buttons">
                <a href="{% url 'main:auth' %}" class="btn accent">Войти</a>
            </div>
        {% endif %}
    </div>
</div>

<div class="features">
    <div class="container">
        <h2>Почему выбирают нас</h2>
        <div class="features-grid">
            <div class="feature">
                <i class="ri-shield-check-line"></i>
                <h3>Проверенные исполнители</h3>
                <p>Мы тщательно проверяем каждого исполнителя перед публикацией</p>
            </div>
            <div class="feature">
                <i class="ri-star-line"></i>
                <h3>Честные отзывы</h3>
                <p>Только реальные отзывы от клиентов</p>
            </div>
            <div class="feature">
                <i class="ri-secure-payment-line"></i>
                <h3>Безопасная оплата</h3>
                <p>Гарантия возврата средств</p>
            </div>
        </div>
    </div>
</div>

{% if latest_performers %}
<div class="latest-performers">
    <div class="container">
        <h2>Новые исполнители</h2>
        <div class="performers-grid">
            {% for performer in latest_performers %}
            <div class="performer-card">
                <div class="performer-photo">
                    {% if performer.profile_photo %}
                        <img src="{{ performer.profile_photo.url }}" alt="{{ performer.get_full_name }}">
                    {% else %}
                        <img src="{% static 'images/default-avatar.png' %}" alt="Default avatar">
                    {% endif %}
                </div>
                <div class="performer-info">
                    <h3>{{ performer.get_full_name }}</h3>
                    <p class="performer-type">{{ performer.get_service_type_display }}</p>
                    <div class="performer-location">
                        <i class="ri-map-pin-line"></i>
                        <span>{{ performer.city }}</span>
                    </div>
                    <a href="{% url 'main:view_profile' performer.id %}" class="btn outline">Посмотреть профиль</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<div class="categories">
    <div class="container">
        <h2>Категории исполнителей</h2>
        <div class="categories-grid">
            <a href="{% url 'main:catalog' %}?category=photographer" class="category">
                <i class="ri-camera-line"></i>
                <h3>Фотографы</h3>
            </a>
            <a href="{% url 'main:catalog' %}?category=videographer" class="category">
                <i class="ri-video-line"></i>
                <h3>Видеографы</h3>
            </a>
            <a href="{% url 'main:catalog' %}?category=musician" class="category">
                <i class="ri-music-2-line"></i>
                <h3>Музыканты</h3>
            </a>
            <a href="{% url 'main:catalog' %}?category=decorator" class="category">
                <i class="ri-palette-line"></i>
                <h3>Декораторы</h3>
            </a>
            <a href="{% url 'main:catalog' %}?category=makeup" class="category">
                <i class="ri-brush-line"></i>
                <h3>Визажисты</h3>
            </a>
            <a href="{% url 'main:catalog' %}?category=host" class="category">
                <i class="ri-mic-line"></i>
                <h3>Ведущие</h3>
            </a>
        </div>
    </div>
</div>

<!-- Mobile Menu -->
<div class="mobile-menu">
    <div class="mobile-menu-content">
        <nav class="mobile-nav">
            <a href="{% url 'main:index' %}" class="mobile-nav-link">
                <i class="ri-home-line"></i>
                <span>Главная</span>
            </a>
            <a href="{% url 'main:catalog' %}" class="mobile-nav-link">
                <i class="ri-user-star-line"></i>
                <span>Исполнители</span>
            </a>
            {% if user.is_authenticated %}
                {% if user.user_type == 'customer' %}
                    <a href="{% url 'main:create_order' %}" class="mobile-nav-link">
                        <i class="ri-add-circle-line"></i>
                        <span>Создать заявку</span>
                    </a>
                {% endif %}
                <a href="{% url 'main:dashboard' %}" class="mobile-nav-link">
                    <i class="ri-dashboard-line"></i>
                    <span>Личный кабинет</span>
                </a>
                <div class="mobile-nav-dropdown">
                    <button class="mobile-nav-dropdown-toggle">
                        <div class="user-info">
                            {% if user.profile_photo %}
                                <img src="{{ user.profile_photo.url }}" alt="{{ user.get_full_name }}" class="nav-avatar">
                            {% else %}
                                <i class="ri-user-line"></i>
                            {% endif %}
                            <span>{{ user.get_full_name|default:user.phone_number }}</span>
                        </div>
                        <i class="ri-arrow-down-s-line"></i>
                    </button>
                    <div class="mobile-nav-dropdown-menu">
                        <a href="{% url 'main:profile_settings' %}" class="mobile-nav-link">
                            <i class="ri-settings-line"></i>
                            <span>Настройки</span>
                        </a>
                        <a href="{% url 'main:logout' %}" class="mobile-nav-link">
                            <i class="ri-logout-box-line"></i>
                            <span>Выйти</span>
                        </a>
                    </div>
                </div>
            {% else %}
                <a href="{% url 'main:auth' %}" class="mobile-nav-link auth-link">
                    <i class="ri-login-box-line"></i>
                    <span>Войти по номеру телефона</span>
                </a>
            {% endif %}
        </nav>
    </div>
</div>
{% endblock %} 